# トースト通知

ユーザーの操作に対するフィードバックを表示するトースト通知システムです。

## 概要

| 種類 | 表示場所 | 用途 | 特徴 |
|------|----------|------|------|
| **独立トースト** | 画面右下（専用ウィンドウ） | アイテム起動など、ウィンドウ閉鎖後も確認が必要な通知 | クリック貫通 |
| **UI内トースト** | メインウィンドウ内（react-hot-toast） | コピー完了、エラー表示など即時フィードバック | ウィンドウを閉じると消える |

---

## 開発者向けガイドライン

### どちらのトーストを使うべきか

- **メインウィンドウが閉じた後も通知を見せたい** → 独立トースト
- **それ以外** → UI内トースト

### メッセージ文言のルール

1. **簡潔に**: 1行で完結する短いメッセージ
2. **結果を明示**: 「〜しました」「〜に失敗しました」
3. **対象を明示**: 何に対する操作かわかるように（例：「パスを」「ショートカットの」）
4. **エラー時は原因を含める**: 可能な場合はエラー詳細を追加（例：`${error}`）

### トースト種類の使い分け

| 種類 | 用途 | 表示時間 |
|------|------|----------|
| success（成功） | 操作完了 | 2秒 |
| error（エラー） | 操作失敗、例外発生 | 4秒 |
| warning（警告） | 操作不可、注意喚起 | 3秒 |
| info（情報） | 一般的な情報 | 3秒 |

---

## 技術仕様

### UI内トースト（react-hot-toast）

**実装ファイル:**
- `src/renderer/hooks/useToast.ts` - トーストフック
- `src/renderer/components/ToastProvider.tsx` - プロバイダー

**スタイル:**

| 種類 | 背景色 | テキスト色 | アイコン |
|------|--------|------------|----------|
| success | `var(--color-white)` | `var(--text-muted)` | 青チェックマーク（`var(--color-primary)`） |
| error | `var(--color-danger)` | `var(--color-white)` | 白×マーク |
| warning | `var(--color-warning)` | `var(--text-primary)` | ⚠️ |
| info | `var(--color-info)` | `var(--color-white)` | ℹ️ |

### 独立トースト

**実装ファイル:**
- `src/main/services/toastWindowService.ts` - トーストウィンドウサービス
- `src/main/ipc/notificationHandlers.ts` - IPCハンドラー
- `toast.html` - トースト表示用HTML

**表示時間:** 通常2.5秒、グループ起動時3秒

**ウィンドウ仕様:**
- サイズ: 400×100px
- 位置: 画面右下
- フレームレス・透明
- クリック貫通（マウスイベント無視）

---

## 画面別 トースト一覧

### メインウィンドウ

| 操作 | トースト | 種類 | メッセージ |
|------|----------|------|------------|
| 通常アイテムを起動 | 独立 | 成功 | アイテム名、種類、パス、アイコンを表示 |
| グループを起動 | 独立 | 成功 | グループ名、含まれるアイテム数、最初の3件のアイテム名を表示 |
| ウィンドウ操作アイテムを起動 | 独立 | 成功 | アイテム名と操作種類を表示 |
| ウィンドウを選択してアクティブ化 | 独立 | 成功 | {ウィンドウタイトル} をアクティブ化しました |
| パスをコピー | UI内 | 成功 | パスをコピーしました |
| パスをコピー | UI内 | エラー | パスのコピーに失敗しました |
| 親フォルダーのパスをコピー | UI内 | 成功 | 親フォルダーのパスをコピーしました |
| 親フォルダーのパスをコピー | UI内 | エラー | 親フォルダーのパスのコピーに失敗しました |
| 親フォルダーのパスをコピー（URL/カスタムURI） | UI内 | 警告 | URLおよびカスタムURIには親フォルダーがありません |
| 親フォルダーのパスをコピー（パス解析失敗） | UI内 | 警告 | 親フォルダーのパスを取得できませんでした |
| ショートカットのパスをコピー | UI内 | 成功 | ショートカットのパスをコピーしました |
| ショートカットのパスをコピー | UI内 | エラー | ショートカットのパスのコピーに失敗しました |
| ショートカットのパスをコピー（パス未設定） | UI内 | 警告 | ショートカットのパスが見つかりません |
| ショートカットの親フォルダーのパスをコピー | UI内 | 成功 | ショートカットの親フォルダーのパスをコピーしました |
| ショートカットの親フォルダーのパスをコピー | UI内 | エラー | ショートカットの親フォルダーのパスのコピーに失敗しました |
| ショートカットの親フォルダーのパスをコピー（解析失敗） | UI内 | 警告 | ショートカットの親フォルダーのパスを取得できませんでした |
| 親フォルダーを開く | UI内 | エラー | 親フォルダーを開くのに失敗しました |
| リンク先の親フォルダーを開く | UI内 | エラー | リンク先の親フォルダーを開くのに失敗しました |
| デスクトップに移動 | 独立 | 成功 | ウィンドウをデスクトップ {番号} に移動しました |
| デスクトップに移動 | 独立 | エラー | ウィンドウの移動に失敗しました: {エラー詳細} |
| 全デスクトップに固定（Pin） | 独立 | 成功 | ウィンドウを全デスクトップに固定しました |
| 全デスクトップに固定（Pin） | 独立 | エラー | ウィンドウの固定に失敗しました: {エラー詳細} |
| 固定解除（UnPin） | 独立 | 成功 | ウィンドウの固定を解除しました |
| 固定解除（UnPin） | 独立 | エラー | ウィンドウの固定解除に失敗しました: {エラー詳細} |

### 登録モーダル

| 操作 | トースト | 種類 | メッセージ |
|------|----------|------|------------|
| アイコン取得（結果なし） | UI内 | 警告 | アイコンを取得できませんでした |
| アイコン取得（例外発生） | UI内 | エラー | アイコン取得中にエラーが発生しました |
| ファイル追加（例外発生） | UI内 | エラー | ファイルの追加中にエラーが発生しました |
| ファイル読み込み（例外発生） | UI内 | エラー | ファイルの読み込み中にエラーが発生しました |

### 管理画面

| 操作 | トースト | 種類 | メッセージ |
|------|----------|------|------------|
| 設定を変更して保存 | UI内 | 成功 | 設定を保存しました |

### ワークスペースウィンドウ

| 操作 | トースト | 種類 | メッセージ |
|------|----------|------|------------|
| アイテムをD&Dで追加 | 独立 | 成功 | 「{アイテム名}」をワークスペースに追加しました |
| アイテムをD&Dで追加（失敗） | 独立 | エラー | ワークスペースへの追加に失敗しました |

---

## 関連ドキュメント

- [メインウィンドウ仕様](../screens/main-window.md) - メインウィンドウの操作
- [コンテキストメニュー仕様](../screens/context-menu.md) - 右クリックメニュー
- [ワークスペース機能](./workspace.md) - ワークスペースの操作
- [CSSデザインシステム](../architecture/css-design.md) - CSS変数の定義
