# アイコン進捗表示

アイコン取得処理の進行状況をリアルタイムで確認できる進捗表示機能を提供します。

## 機能概要

- **非モーダル表示**: メイン画面下部に表示され、他の操作を継続可能
- **リアルタイム更新**: 各アイテム処理完了時に即座に進捗を更新
- **自動非表示**: 処理完了後3秒で自動的に非表示

## 表示内容

### 基本情報
- **処理種別**: 「ファビコン取得中」または「アイコン抽出中」
- **進捗数値**: `現在処理済み数/総処理数` (例: `12/35`)
- **進捗率**: パーセンテージとプログレスバー

### 詳細情報
- **現在処理中のアイテム**: 処理中のURLまたはファイルパス
- **エラー件数**: 失敗したアイテムの数
- **経過時間**: 処理開始からの経過時間
- **推定残り時間**: 処理速度に基づく残り時間の推定

## 対象アイテムの選択

### ファビコン取得時
```typescript
// メインタブ・テンポラリタブから以下の条件でフィルタリング
const targetUrls = items.filter(item => 
  item.type === 'url' && !item.icon
).map(item => item.path);
```

### アイコン抽出時
```typescript
// メインタブ・テンポラリタブから以下の条件でフィルタリング
const targetItems = items.filter(item => 
  !item.icon && item.type !== 'url'
);
```

## 処理方式

- **逐次処理**: メモリ効率とエラー耐性を向上させるため、並列処理から逐次処理に変更
- **進捗通知**: 各アイテム処理前後にIPCでレンダラープロセスに進捗状況を送信
- **エラーハンドリング**: 個別アイテムの失敗では処理を継続し、エラー数をカウント

## UI仕様

### 表示例
```
[▓▓▓▓▓░░░░░] 12/35 ファビコン取得中...
 エラー: 2件   経過: 45秒   残り: 約1分15秒
 処理中: https://github.com/masaodev/quick-dash-launcher
```

### 完了時表示
```
ファビコン取得完了 (2件のエラー)
```

## 技術実装

### コンポーネント構成
- **IconProgressBar**: 進捗表示UIコンポーネント
- **useIconProgress**: 進捗状態管理カスタムフック

### IPC通信
- **icon-progress-start**: 進捗開始通知
- **icon-progress-update**: 進捗更新通知
- **icon-progress-complete**: 進捗完了通知

### 新しいAPI
- **fetchFaviconsWithProgress**: 進捗付きファビコン一括取得
- **extractIconsWithProgress**: 進捗付きアイコン一括抽出

## 関連ドキュメント

- [アイコンシステム](icon-system.md) - アイコンシステム全体の概要
- [ファビコン取得システム](icon-favicon.md) - ファビコン取得の詳細仕様