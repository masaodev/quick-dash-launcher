# 手動テストチェックリスト

新機能の追加や大きな変更を行った場合、リリース前に手動で確認すべき項目です。

## 初回起動機能

1. **初回起動時のホットキー設定画面**
   - アプリケーション初回起動時に自動表示
   - 起動ホットキーの設定（デフォルト: Alt+Space）
   - リアルタイムバリデーション
   - ESCキーやフォーカス喪失では閉じられない
   - 設定完了後、メインウィンドウに遷移
   - E2Eテスト: `tests/e2e/specs/first-launch-setup.spec.ts`

## 基本機能

2. **起動ホットキー（Alt+Space）** - 登録とウィンドウトグル
3. **全キーボードショートカット** - Enter、Shift+Enter、矢印、Ctrl、Escape
4. **検索機能**
   - 単一キーワードでの検索
   - 複数キーワードでの検索（AND検索）
   - E2Eテスト: `tests/e2e/specs/basic-ui.spec.ts`
5. **タブ切り替え** - メイン/一時タブの切り替え
   - E2Eテスト: `tests/e2e/specs/basic-ui.spec.ts`
6. **アイテム起動**
   - URL
   - ファイル
   - フォルダ
   - 引数付きアプリケーション

## アイコン機能

7. **アイコン一括取得** - メインウィンドウの🔄ドロップダウンメニューから選択
   - 「🎨 アイコン取得（現在のタブ）」: 現在表示中のタブのアイテムのみ対象
   - 「🎨 アイコン取得（全タブ）」: 全タブのアイテムを対象
   - アイコンが未設定のアイテムのみを対象に一括取得
   - URLアイテムはファビコンを取得
   - EXE、ファイル、カスタムURIアイテムはアイコンを抽出
   - フォルダとグループは除外される
8. **カスタムURIアイコン** - レジストリベースのアイコン取得
   - obsidian://, ms-excel://, vscode://等のカスタムURIでレジストリベースのアイコン取得
   - キャッシュ機能（uri_[スキーマ]_icon.png形式）
   - フォールバック機能（レジストリ → 拡張子 → デフォルト絵文字）

## アイテム管理

10. **一時タブへのアイテム追加**
11. **URIスキーマ処理** - obsidian://, ms-excel://などの処理

## ウィンドウ機能

12. **システムトレイ機能**
    - **ダブルクリック**: ウィンドウの復元
    - **右クリックメニュー**:
      - バージョン情報の表示
      - 表示メニュー - ホットキー表示付き（例: `表示 (Alt+Space)`）
      - 設定... - 管理ウィンドウの設定タブを開く
      - データフォルダを開く - エクスプローラーでデータフォルダを開く
      - ヘルプ - GitHubリポジトリをブラウザで開く
      - 終了 - アプリケーション終了
13. **ウィンドウ固定化機能** - 📌ボタン（3段階のピン留めモード）
    - クリックでモードを順番に切り替え: normal → alwaysOnTop → stayVisible → normal
    - **normal**: 通常動作（フォーカスアウトで非表示）
    - **alwaysOnTop**: 常に最前面に表示、フォーカスアウトしても非表示にならない
    - **stayVisible**: フォーカスアウトしても非表示にならない（最前面ではない）
    - 各状態の視覚的フィードバック（ボタンの色変化）
    - アプリケーション再起動時の状態保持（初期状態はnormal）

## ファイル処理

14. **ショートカット処理の統一性**
    - フォルダ取込アイテムと直接指定の.lnkファイルが同じ処理を受ける
    - 引数を含む複雑なショートカットの正常な解析
    - ターゲットパスの正確な抽出とアイテムタイプの適切な分類

15. **ドラッグ&ドロップ登録機能**
    - ファイルやフォルダをウィンドウにドラッグするとオーバーレイ表示
    - 複数ファイルの同時ドロップに対応
    - 登録モーダルでアイテム名、保存先タブ、引数を設定可能
    - フォルダは「フォルダ自体」または「内容を展開」を選択可能
    - アイコンの自動抽出と表示

## 設定機能

16. **設定メニュー** - ⚙ボタンによる各種操作
    - 設定フォルダ・ファイルへのアクセス
    - JSON形式でのデータエクスポート
    - アプリケーションの終了

## 拡張機能

17. **フォルダ取込アイテム機能**
    - 基本構文: `dir,パス[,オプション...]`
    - 対応オプション:
      - `depth=数値`: サブディレクトリを辿る深さ（0=現在のみ、-1=無制限）
      - `types=file|folder|both`: 取得するタイプ（デフォルト: both）
      - `filter=パターン`: ファイル/フォルダー名のフィルター（例: *.txt）
      - `exclude=パターン`: 除外パターン（例: temp*）
      - `prefix=文字列`: 展開されるアイテムの表示名に付けるプレフィックス
      - `suffix=文字列`: 展開されるアイテムの表示名に付けるサフィックス
    - 後方互換性: オプションなしの場合は従来通り.lnkファイルのみ
    - 使用例:
      - `dir,C:\Users\Desktop,types=file,filter=*.exe`
      - `dir,C:\Users\Desktop,depth=2,types=folder`
      - `dir,C:\Users\Desktop,depth=1,filter=*.txt,exclude=temp*`
      - `dir,C:\Projects,prefix=仕事,depth=1,types=file`（「仕事: ファイル名」として表示）

18. **グループ起動機能**
    - 基本構文: `group,グループ名,アイテム名1,アイテム名2,...`
    - グループアイテムの表示確認:
      - 📦アイコンが表示される
      - 水色系の背景色（他のアイテムと視覚的に区別）
      - 左側に青色の強調線
      - 表示名に「(N個)」が表示される（例: `開発環境 (4個)`）
      - ツールチップで「グループ: アイテム名1, アイテム名2, ...」が表示される
    - グループ実行の確認:
      - グループ選択してEnterキーで順次実行される
      - 各アイテムが500ms間隔で起動される
      - 存在しないアイテム名はスキップされる（エラーで停止しない）
    - アイテム管理での編集:
      - 空行から📦グループボタンでグループ作成
      - セル編集でグループ名とアイテム名リストを編集
      - ✏️ボタンでRegisterModalによる詳細編集
      - 種別ドロップダウンで「グループ」を選択
      - アイテム名リストでカンマを自由に入力できる
      - グループ行の削除が正常に動作する
    - エラーハンドリング:
      - 存在しないアイテム名を参照した場合、警告ログを出力
      - 部分的なエラーでもグループ実行は継続される
    - 使用例:
      - `group,開発環境,Visual Studio Code,Slack,Chrome`
      - `group,会議準備,Zoom,Teams,議事録フォルダ`

## E2Eテストとの対応

多くの機能は自動E2Eテストで検証されています。詳細は以下を参照してください：

- [テストガイド](./README.md) - E2Eテストの実行方法
- [E2Eテスト仕様](../../tests/e2e/README.md)

## 関連ドキュメント

- [開発ガイド](../setup/development.md) - 基本的な開発情報
- [アイテム管理](../screens/admin-window.md#6-アイテム管理の詳細) - 編集モードのテスト項目
- [ビルドとデプロイ](../setup/build-deploy.md) - ビルド後のテスト手順
