# データフロー

QuickDashLauncherのデータ処理フローを説明します。

## 通常モード（表示・起動）

1. メインプロセスが`%APPDATA%/quickdashlauncher/config/`からデータファイルを読み込む
2. データファイル処理時に特殊な形式を自動変換
   - `dir,`ディレクティブ: 指定ディレクトリをスキャンしてファイル・フォルダを展開
     - デフォルト動作: 全てのファイルとフォルダをインポート（深さ0）
     - オプション指定可能: `depth`, `types`, `filter`, `exclude`, `prefix`
     - プレフィックス指定時は展開されるアイテム名に自動付与
   - 特定拡張子ファイル: .lnkファイルなどは自動的にターゲット情報を解析
3. パーサーが複数のデータファイルをマージし、重複を削除し、名前順でソート
4. レンダラーがリアルタイムフィルタリングでアイテムを表示
5. ユーザーアクションがシステム操作のためのIPCコールをメインプロセスにトリガー

## 編集モード（生データ編集）

1. 編集モード開始時にウィンドウサイズを自動拡大（1000x700px）
2. 編集モード中はフォーカスアウトでもウィンドウが非表示にならない
3. `load-raw-data-files`でデータファイルを展開せずに読み込み
4. `RawDataLine`型として行ごとにパース（種類：directive, item, comment, empty）
5. `EditableRawItemList`コンポーネントでテーブル形式表示
   - テーブル構成：`☑️ | # | 種類 | 名前 | パスと引数 | 操作`
   - 通常アイテム：名前列で表示名を個別編集可能、パスと引数列でパス＋引数を編集可能
   - DIRディレクティブ：名前列は編集不可（ハイフン表示）、パスと引数列でフォルダパス＋オプションを編集可能
6. ヘッダーに編集中のファイル名を表示
7. ユーザーが行の追加・削除・編集を実行
8. `save-raw-data-files`で変更内容をファイルに直接書き込み
9. 行番号の再採番とファイルバックアップを自動実行
10. 編集モード終了時にウィンドウサイズを元のサイズ（479x506px）に復元

## 関連ドキュメント

- [アーキテクチャ概要](overview.md) - システム全体の構造
- [IPCチャンネル詳細](ipc-channels.md) - 各IPCチャンネルの仕様
- [編集モード](../features/edit-mode.md) - 編集モードの詳細仕様