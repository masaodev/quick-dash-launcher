# アーキテクチャ概要

## プロセス構造

- **メインプロセス** (`src/main/main.ts`): システム操作、ウィンドウ管理、IPCを処理するElectronメインプロセス
- **レンダラープロセス** (`src/renderer/`): UIのためのReactアプリケーション
- **プリロードスクリプト** (`src/main/preload.ts`): レンダラーに限定的なAPIを公開するセキュアブリッジ
- **共通型定義** (`src/common/types.ts`): プロセス間で共有される型定義

## サービスクラス構造

アプリケーションの主要機能はサービスクラスで実装（`src/main/services/`）:
- `SettingsService`: アプリケーション設定の読み書き・管理
- `HotkeyService`: グローバルホットキーの登録・変更
- `BackupService`: データファイルの自動バックアップ
- `AutoLaunchService`: Windows起動時の自動起動設定

すべてシングルトンパターンで実装され、`getInstance()`で取得します。

## IPCハンドラー構造

IPCハンドラーは機能ごとに分離（`src/main/ipc/`）:
- `settingsHandlers.ts`: アプリケーション設定の取得・更新（AutoLaunchServiceと連携）
- `configHandlers.ts`: 設定フォルダーへのアクセス
- `dataHandlers.ts`: データファイルの読み込み・保存、アイテム登録
- `itemHandlers.ts`: アイテムの起動・フォルダー表示
- `iconHandlers.ts`: ファビコン取得・アイコン抽出
- `windowHandlers.ts`: ウィンドウ固定化制御
- `historyHandlers.ts`: 検索履歴の読み書き・管理

## データ処理システム

### 設計原則
- **一元化された処理**: 同種のデータは共通の処理関数で統一的に処理
- **拡張可能性**: 新しいファイル形式やデータソースを容易に追加可能
- **エラー処理**: 単一アイテム処理エラーがシステム全体に影響しない設計

### 処理パターン
1. **ディレクトリベース**: `dir,パス`形式でディレクトリ内容を動的に取得
2. **ファイル変換**: 特定の拡張子ファイルを実行可能な形式に自動変換
3. **直接指定**: 明示的に指定されたパスをそのまま使用

### データ変換の仕組み
- **入力**: 多様な形式（ディレクトリパス、ショートカットファイル、実行ファイル等）
- **処理**: ファイル種別に応じた適切な解析・変換処理
- **出力**: 統一されたCSV形式（`名前,パス,引数,カスタムアイコン`）

## 関連ドキュメント

- [IPCチャンネル詳細](ipc-channels.md) - 各IPCチャンネルの仕様
- [データフロー](data-flow.md) - 通常モードと編集モードのデータ処理
- [ウィンドウ制御](window-control.md) - ウィンドウ管理システム