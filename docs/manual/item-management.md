# アイテム管理

アイテムはメインウィンドウまたは管理ウィンドウ（Ctrl+E）で編集できます。

## アイテム編集方法

QuickDashLauncherでは、以下の2つの方法でアイテムを編集できます:

### 1. メインウィンドウから編集

メインウィンドウでアイテムを右クリックし、「✏️ 編集」を選択すると、アイテム登録モーダルが開いて編集できます。

- **対応アイテム**: 通常アイテム、フォルダ取込ディレクティブ、グループ
- **フォルダ取込展開アイテムの編集**: フォルダ取込から展開されたアイテムを編集する場合、元のディレクティブ行が自動的に読み込まれます
- **モーダルモード**: 編集中はウィンドウが非表示にならないため、参照しながら編集可能
- **更新API**:
  - 通常アイテム: `updateItem` APIでCSV形式更新
  - フォルダ取込ディレクティブ: `updateRawLine` APIで生データ行を直接更新

### 2. 管理ウィンドウから編集（Ctrl+E）

Ctrl+Eでアイテム管理に切り替えて、データファイル（data.txt、data2.txt、data3.txt...）を直接編集できます。

## データファイルの選択

管理ウィンドウでは、編集対象のデータファイルを選択できます。

- **データファイル選択ドロップダウン**: ヘッダー部分に表示されるドロップダウンメニューで編集対象のファイルを選択
- **利用可能なファイル**: 設定フォルダ内のすべてのdata*.txtファイル（data.txt, data2.txt, data3.txt...）
- **選択後の動作**: 選択したファイルの内容が即座に読み込まれ、テーブルに表示されます
- **未保存変更の警告**: 別のファイルに切り替える際、未保存の変更がある場合は確認ダイアログが表示されます

**注意**: tempdata.txtは自動生成される一時ファイルのため、選択肢には表示されません。

## アイテム管理（管理ウィンドウ）の特徴

- フォルダ取込アイテムを展開せずに生データのまま編集
- テーブル形式で行ごとに表示・編集（☑️ | # | 種類 | 名称 | 内容 | 操作）
- **2つの編集方法を提供**:
  - **セル編集**: セルを直接クリックして素早い修正
  - **詳細編集（✏️）**: ✏️ボタンでRegisterModalを使った包括的編集
  - **ユーザー選択式アイテム種別**: 従来の自動判定に代わり、ユーザーが「単一アイテム」「フォルダ取込アイテム」を明示的に選択
  - **アイテム種別の変更**: 既存アイテムをフォルダ取込アイテムに変更、またはその逆も可能
  - **フォルダ取込アイテム選択時の制限**: 名前フィールドは読み取り専用（ハイフン表示）、パスとフォルダ取込アイテムオプションのみ編集可能
- **アイテム表示名の個別編集**: 単一アイテムの名前のみ編集可能
- **フォルダ取込アイテムの制限**: 名前列は編集不可、パスと引数列は編集可能
- 行の追加、削除、内容編集が可能
- リアルタイム検索による行のフィルタリング
- 変更の一時保存と一括保存機能（全ての変更は保存ボタンクリックまで確定されない）
- ヘッダーに編集中のファイル名を表示
- **ウィンドウサイズ自動拡大**: アイテム管理時に1000x700pxに拡大、終了時に元のサイズに復元
- **フォーカスアウト無効化**: アイテム管理中はフォーカスアウトでもウィンドウが非表示にならない

## 操作方法

### 空行からのアイテム作成
- **行を追加**: ➕行を追加ボタンで新しい空行を作成
- **種類選択**: 空行の種類列に表示される3つのボタンから選択
  - 📄 単一アイテム: 通常のアイテムを作成
  - 🗂️ フォルダ取り込み: フォルダ取込アイテムを作成
  - 📦 グループ: グループアイテムを作成
- **編集制限**: 空行の状態では
  - パスと引数列は「(まず種類を選択してください)」と表示され編集不可
  - ✏️詳細編集ボタンは無効化
  - 🗑️削除ボタンのみ有効
- **種類選択後**: 名前やパスなどのフィールドが編集可能になる
  - パスが未設定の場合は「(パスなし)」または「(フォルダパスなし)」と表示

### セル編集
- セルをクリックして即座に編集
- **編集確定**: Enter または フォーカス移動
- **編集キャンセル**: Escape
- **編集制限**: 空行の場合はセル編集不可

### 詳細編集
✏️ボタンでRegisterModalを開いて包括的編集:
- **アイテム種別選択**: 画面上部でユーザーが「単一アイテム」「フォルダ取込アイテム」「グループ」を明示的に選択
- **単一アイテム選択時**: 単一アイテム登録（名前・パス・引数の編集が可能）
- **フォルダ取込アイテム選択時**: フォルダ取込アイテムとして処理
  - 名前フィールドは読み取り専用（ハイフン表示）
  - フォルダ取込アイテムオプション詳細設定（深度、タイプ、フィルター、除外、プレフィックス）
- **グループ選択時**: グループアイテムとして処理
  - グループ名フィールドで名前を編集
  - パスフィールドは非表示
  - 引数フィールドは非表示
  - アイテム名リストフィールド（テキストエリア）で既存アイテム名をカンマ区切りで入力
  - カンマを含むテキストの自由な入力が可能
- **種別変更**: 単一アイテム、フォルダ取込アイテム、グループの相互変換が可能
- **編集制限**: 空行の場合は詳細編集不可

### データ整列
🔤整列ボタンで表示データを自動整理:
- **第1ソートキー**: 種類（ディレクティブ（フォルダ取込、グループ） → 単一アイテム → コメント → 空行）
- **第2ソートキー**: パスと引数（文字列の昇順、大文字小文字区別なし）
  - グループの場合はアイテム名リストで整列
- **第3ソートキー**: 名前（文字列の昇順、大文字小文字区別なし）
- 整列後は未保存状態となり、保存ボタンで実際のファイルに反映

### その他の操作
- **名前編集**: 単一アイテムとグループの名前列をクリック（フォルダ取込アイテムは編集不可）
- **行削除**: 選択後にDeleteキーまたは削除ボタン
- **一括操作**: チェックボックスによる複数選択
- **保存**: Ctrl+S または保存ボタン

## テーブル構成

### 列構成
- **☑️**: 行選択チェックボックス
- **#**: 行番号
- **種類**: アイテムタイプ（フォルダ取込アイテム/グループ/単一アイテム/コメント/空行）
- **名前**: アイテムの表示名（単一アイテムとグループは編集可能、フォルダ取込アイテムは編集不可）
- **パスと引数**: パスと引数の統合表示（全てのタイプで編集可能）
  - グループの場合はアイテム名のリスト（カンマ区切り）が表示される
- **操作**: 2つのボタン
  - **✏️**: 詳細編集ボタン（RegisterModal使用）
  - **🗑️**: 削除ボタン

## 関連ドキュメント

- **[データファイル形式仕様](../reference/data-file-format.md)** - データファイルの詳細仕様
- **[フォルダ取込アイテム](folder-import-item.md)** - フォルダ内容インポート機能
- **[グループ起動機能](group-launch.md)** - グループ機能の詳細
- **[画面構成](../reference/screens/screen-list.md)** - アイテム管理画面の詳細仕様