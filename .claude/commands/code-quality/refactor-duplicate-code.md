---
description: "重複コードの検出と統合"
allowed-tools: ["Edit", "MultiEdit", "Read", "Grep", "Glob"]
---

# Refactor Duplicate Code

重複コードの検出と統合を行います。

## 実行内容

### 1. 重複コードの検出・分析
- 類似したコードブロックを検索・特定
- コピー&ペーストされたコードパターンの検出
- 重複度の高い箇所の優先順位付け
- 重複コードの影響範囲分析

### 2. 重複コードの統合・修正
- 共通化可能な処理をユーティリティ関数として抽出
- 重複したロジックを共通モジュールに統合
- パラメータ化による汎用関数の作成
- 重複部分の削除とリファクタリング

### 3. 抽出後の最適化
- 抽出した関数の命名とドキュメント化
- 適切なモジュール配置の検討
- 型定義の追加・改善
- テストケースの更新

## 実行手順

1. **検出フェーズ**: プロジェクト全体から重複コードを検索
2. **分析フェーズ**: 重複パターンを分類し優先順位付け
3. **抽出フェーズ**: 共通関数・モジュールとして抽出
4. **置換フェーズ**: 重複箇所を抽出した関数に置換
5. **検証フェーズ**: 動作確認とテスト実行

## 検出パターン

- **完全一致**: 全く同じコードブロック
- **部分一致**: 変数名や値のみ異なるコード
- **構造一致**: 処理の流れが同じパターン
- **API呼び出し**: 同じAPIを異なる箇所で使用

## 注意事項

- 機能に影響しない範囲で統合を行います
- 抽出前に必ずバックアップを取ることを推奨
- 統合後は関連テストの実行を必須とします
- パフォーマンスへの影響を考慮した設計を行います

## 使用方法

```
/refactor-duplicate-code $ARGUMENTS
```

引数として特定のディレクトリやファイルを指定できます。

### 例：
```
/refactor-duplicate-code
/refactor-duplicate-code src/renderer/
/refactor-duplicate-code src/main/services/
```