---
description: "新バージョンのリリース（タグ作成とプッシュ）"
allowed-tools: ["Bash", "Read", "Edit", "TodoWrite", "AskUserQuestion"]
---

# Release Version

新バージョンのリリースを行うコマンドです。バージョン番号の更新、コミット、タグ作成、プッシュを自動化します。

## 実行内容

1. **現在のバージョン確認**
   - `package.json` から現在のバージョンを取得
   - 既存のGitタグを確認

2. **バージョン番号の決定**
   - ユーザーに次のバージョン番号を確認
   - セマンティックバージョニング（パッチ/マイナー/メジャー）に基づいて提案

3. **バージョン更新**
   - `package.json` のバージョン番号を更新
   - 変更をコミット

4. **タグ作成とプッシュ**
   - `v{version}` 形式のGitタグを作成
   - メインブランチとタグをリモートにプッシュ

5. **GitHub Actionsによる自動ビルド**
   - タグのプッシュによりGitHub Actionsが自動実行される
   - ビルドとリリースが自動的に作成される

## セマンティックバージョニング

- **パッチバージョン（0.2.x）**: バグ修正、リファクタリング、小規模な改善
- **マイナーバージョン（0.x.0）**: 新機能追加、中規模な変更
- **メジャーバージョン（x.0.0）**: 破壊的変更、大規模なアーキテクチャ変更

## 使用方法

### 基本的な使用
```
/release-version
```

コマンドを実行すると、対話的に次のバージョン番号を選択できます。

## 事前要件

- 現在のブランチが `main` である
- すべての変更がコミット済みである（クリーンな状態）
- リモートリポジトリへのプッシュ権限がある
- GitHub Actionsが正しく設定されている

## 処理フロー

```bash
# 1. 現在のバージョン確認
cat package.json | grep version
git tag --list

# 2. package.json更新
# version フィールドを更新

# 3. コミット
git add package.json
git commit -m "chore: v{version}リリース準備 - バージョン更新"

# 4. タグ作成とプッシュ
git tag v{version}
git push origin main
git push origin v{version}
```

## リリース後の確認

1. **GitHub Actionsの確認**
   - リポジトリの「Actions」タブでビルド状況を確認
   - ビルドが成功していることを確認

2. **リリースの確認**
   - リポジトリの「Releases」ページで新しいリリースを確認
   - インストーラーファイルが添付されていることを確認

## トラブルシューティング

### タグが既に存在する
**エラー**: `tag 'v0.2.7' already exists`
**原因**: 同じバージョンのタグが既に作成されている
**解決策**:
- バージョン番号を確認し、次のバージョンを使用する
- または既存のタグを削除する（推奨しない）

### プッシュが失敗する
**エラー**: プッシュ時の認証エラー
**原因**: リモートリポジトリへの権限不足
**解決策**:
- GitHubの認証情報を確認
- プッシュ権限があることを確認

### GitHub Actionsが実行されない
**原因**: ワークフロー設定の問題
**解決策**:
- `.github/workflows/` 配下のワークフローファイルを確認
- タグプッシュをトリガーとする設定があるか確認

## 関連ドキュメント

- [ビルドとデプロイ](../../../docs/guides/build-and-deploy.md) - ビルドシステムの詳細
- [開発ガイド](../../../docs/guides/development.md) - 開発プロセス全般

## 例

```bash
# 通常のリリース（パッチバージョン）
/release-version
# → 0.2.6 から 0.2.7 へ

# マイナーバージョンアップ
/release-version
# → 0.2.7 から 0.3.0 へ
```
